# User API

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ ASP.NET Core –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.  
–í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –∏ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ.

---

## üõ† –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ —Ä–æ–ª—è–º (`Admin` / `User`)
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –ø–æ –ª–æ–≥–∏–Ω—É –∏ –ø–∞—Ä–æ–ª—é
- –°–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö, –ø–æ –ª–æ–≥–∏–Ω—É, –ø–æ –≤–æ–∑—Ä–∞—Å—Ç—É, —Å–≤–æ–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º—è–≥–∫–æ–≥–æ –∏ –ø–æ–ª–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
- Swagger UI —Å –∫–Ω–æ–ø–∫–æ–π **Authorize** –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

---

## üöÄ –ó–∞–ø—É—Å–∫

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Visual Studio
2. –ù–∞–∂–º–∏—Ç–µ **F5** –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ **Debug > Start Debugging**
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Swagger:
   ```
   https://localhost:<–ø–æ—Ä—Ç>/swagger
   ```

---

## üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

1. –í—ã–∑–æ–≤–∏—Ç–µ:
   ```
   POST /api/Auth/login
   ```

   –° —Ç–µ–ª–æ–º –∑–∞–ø—Ä–æ—Å–∞:
   ```json
   {
     "login": "Admin",
     "password": "Admin123"
   }
   ```

2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –∏–∑ –æ—Ç–≤–µ—Ç–∞

3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **Authorize** –≤ Swagger –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω  
   (`Bearer` –≤–≤–æ–¥–∏—Ç—å –Ω–µ –Ω–∞–¥–æ ‚Äî –æ–Ω –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

---

## üîë JWT-–∫–ª—é—á

JWT-–∫–ª—é—á —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ `appsettings.Development.json`, —Ñ–∞–π–ª –≤–∫–ª—é—á—ë–Ω –≤ –ø—Ä–æ–µ–∫—Ç –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏.  
–ö–ª—é—á –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Ü–µ–ª—è—Ö —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

```json
{
  "JwtSettings": {
    "Key": "this_is_a_very_secret_key_12345678"
  }
}
```

---

## üì¶ –ü—Ä–∏–º–µ—Ä—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤

| –ú–µ—Ç–æ–¥ | –ú–∞—Ä—à—Ä—É—Ç                             | –û–ø–∏—Å–∞–Ω–∏–µ                                                    |
|-------|-------------------------------------|-------------------------------------------------------------|
| POST  | `/api/Auth/login`                  | –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω –ø–æ –ª–æ–≥–∏–Ω—É –∏ –ø–∞—Ä–æ–ª—é                           |
| POST  | `/api/Users/create`                | –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (**—Ç–æ–ª—å–∫–æ Admin**)                    |
| PUT   | `/api/Users/update-1/info`         | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–º–µ–Ω–∏, –ø–æ–ª–∞, –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è                       |
| PUT   | `/api/Users/update-1/password`     | –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è                                                |
| PUT   | `/api/Users/update-1/login`        | –°–º–µ–Ω–∞ –ª–æ–≥–∏–Ω–∞ (–ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)|
| GET   | `/api/Users/read/self`             | –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–µ–±–µ                                 |
| GET   | `/api/Users/read/active`           | –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (**Admin**)                   |
| GET   | `/api/Users/read/by-login/{login}` | –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –ª–æ–≥–∏–Ω—É (**Admin**)                    |
| GET   | `/api/Users/read/older-than/{age}` | –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å—Ç–∞—Ä—à–µ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞ (**Admin**) |
| DELETE| `/api/Users/delete/{login}`        | –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (**Admin**)                           |
| PUT   | `/api/Users/restore/{login}`       | –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (**Admin**)                     |

---

## üß™ –¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

–î–ª—è –≤—Ö–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```
–õ–æ–≥–∏–Ω:    Admin  
–ü–∞—Ä–æ–ª—å:  Admin123
```

---

## üß™ –ü–æ–∫—Ä—ã—Ç–∏–µ unit-—Ç–µ—Å—Ç–∞–º–∏

- –í—Å–µ –º–µ—Ç–æ–¥—ã `UsersController` –ø–æ–∫—Ä—ã—Ç—ã unit-—Ç–µ—Å—Ç–∞–º–∏
- –ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
  - –£—Å–ø–µ—à–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
  - –û—à–∏–±–∫–∏: `BadRequest`, `Unauthorized`, `NotFound`, `Conflict`, `Forbid`
  - –í–∞–ª–∏–¥–∞—Ü–∏–∏: –ø—É—Å—Ç—ã–µ –ª–æ–≥–∏–Ω—ã, –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –ª–æ–≥–∏–Ω—ã, —É–¥–∞–ª—ë–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `xUnit` –∏ `Moq`
- –§–∞–π–ª —Å —Ç–µ—Å—Ç–∞–º–∏: `UsersControllerTests.cs`

---

## ‚ùó –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –¢–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –≤ —Ç–µ—á–µ–Ω–∏–µ 2 —á–∞—Å–æ–≤
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–æ –¥–ª—è —É—á–µ–±–Ω—ã—Ö —Ü–µ–ª–µ–π